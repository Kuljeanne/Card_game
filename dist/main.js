(()=>{"use strict";var e={446:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0,t.Card=class{constructor(e,t){this._suit=e,this._value=t,this._card=`${e}:${t}`}build(){this._cardWrapper=this.createDomNode(this._cardWrapper,"div","card"),this._top=this.createDomNode(this._top,"div","card_top"),this._top.innerHTML=`<span>${this._value}</span><img class="suit-mini" src= "img/${this._suit}.svg" alt="${this._suit}">`,this._center=this.createDomNode(this._top,"div","card_center"),this._center.innerHTML=`<img src="img/${this._suit}.svg" alt = "${this._card}">`,this._bottom=this.createDomNode(this._top,"div","card_bottom"),this._bottom.innerHTML=`<span>${this._value}</span><img class="suit-mini" src= "img/${this._suit}.svg" alt="${this._suit}">`,this.onclick(),this.appendElements()}createDomNode(e,t,i){return(e=document.createElement(t)).classList.add(i),e}appendElements(){this._cardWrapper.append(this._top),this._cardWrapper.append(this._center),this._cardWrapper.append(this._bottom)}render(e){e.append(this._cardWrapper)}onclick(){this._cardWrapper.addEventListener("click",(()=>{if(this._cardWrapper.classList.contains("hidden"))if(this._cardWrapper.querySelector(".card-back").remove(),localStorage.getItem("chosen-card")){const e=document.querySelector(".timer");if(localStorage.getItem("chosen-card")!==this._card){if(document.querySelectorAll(".card-back").forEach((e=>e.remove())),e){const t=""+e.textContent;localStorage.setItem("time",t)}localStorage.setItem("result","loss")}else if(localStorage.removeItem("chosen-card"),this._cardWrapper.classList.remove("hidden"),0===document.querySelectorAll(".hidden").length){if(e){const t=""+e.textContent;localStorage.setItem("time",t)}localStorage.setItem("result","win")}}else localStorage.setItem("chosen-card",this._card),this._cardWrapper.classList.remove("hidden")}))}}},752:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ModalFinal=void 0;const s=i(619);class o extends s.Modal{constructor(e,t){super(e),this._result=t}buildModal(e){this._wrapper=this.createDomNode(this._wrapper,"div","modal_wrapper"),this._modal=this.createDomNode(this._modal,"div",this._classes),this._modal.classList.add("modal_block"),this._icon=this.createDomNode(this._modal,"div",`${this._result}`),this._icon.innerHTML=`<img src = "img/${this._result}.png" alt = "${this._result}">`,this._modal.append(this._icon),this._modalTitle=this.createDomNode(this._modalTitle,"h2"),this._modalTitle.textContent=e,this._modalContent=this.createDomNode(this._modalContent,"div","game_data"),this._modalContent.innerHTML=`<h3>Затраченное время</h3><p class = "time-spent">${localStorage.getItem("time")}</p>`,this.appendsModalElements(),this._modalBtn=this.createDomNode(this._modal,"button"),this._modalBtn.textContent="Играть Снова",this._modal.append(this._modalBtn),this.bindEvents()}}t.ModalFinal=o},619:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=void 0,t.Modal=class{constructor(e){this._classes=e}buildModal(e){this._wrapper=this.createDomNode(this._wrapper,"div","modal_wrapper"),this._modal=this.createDomNode(this._modal,"div",this._classes),this._modal.classList.add("modal_block"),this._modalTitle=this.createDomNode(this._modalTitle,"h2"),this._modalTitle.textContent=e,this._modal.classList.contains("complexity-level_block")&&(this._modalTitle.classList.add("complexity-level_title"),this._modalContent=this.createDomNode(this._modalContent,"form","complexity-level_choose"),this._modalContent.innerHTML='<div class = "error error__hidden">Необходимо выбрать сложность</div><div class="complexity-level_options">\n            <input type="radio" name="complexity-level" value="1" id="complexity-level_easy">\n            <label class="complexity-level_option" for="complexity-level_easy">1</label>\n            <input type="radio" name="complexity-level" value="2" id="complexity-level_medium">\n            <label class="complexity-level_option" for="complexity-level_medium">2</label>\n            <input type="radio" name="complexity-level" value="3" id="complexity-level_hard">\n            <label class="complexity-level_option" for="complexity-level_hard">3</label>\n            </div><button class="complexity-level_btn">Старт</button>'),this.appendsModalElements(),this._modalBtn=this.findBtn(),this.bindEvents()}createDomNode(e,t,i){return e=document.createElement(t),i&&e.classList.add(i),e}appendsModalElements(){this._wrapper.append(this._modal),this._modal.append(this._modalTitle),this._modal.append(this._modalContent)}openModal(){const e=document.querySelector(".app");e&&e.append(this._wrapper)}findBtn(){return this._modal.querySelector("button")}bindEvents(){this._modalBtn&&this._modalBtn.addEventListener("click",(e=>{if(e.preventDefault(),this._modal.querySelector("form")){const e=new FormData(this._modal.querySelector("form"));this.isLevelChosen(e)}else localStorage.clear(),window.location.reload()}))}isLevelChosen(e){if(null===e.get("complexity-level"))this._modal.querySelector(".error").classList.remove("error__hidden");else{const t=e.get("complexity-level");localStorage.setItem("level",t),this.closeModal()}}closeModal(){this._wrapper.remove()}}},707:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0,t.Timer=class{constructor(){this._min=0,this._sec=0,this._min=0,this._sec=0}buildTimer(){this._wrapper=this.createDomNode(this._wrapper,"div","timer_wrapper"),this._desc=this.createDomNode(this._desc,"div","time_desc"),this._desc.innerHTML='<div class="desc min">min</div><div class="desc">sec</div>',this._time=this.createDomNode(this._time,"div","timer"),this._time.textContent="00.00",this.appendElements()}createDomNode(e,t,i){return(e=document.createElement(t)).classList.add(i),e}appendElements(){this._wrapper.append(this._desc),this._wrapper.append(this._time)}renderTimer(e){e.append(this._wrapper)}tick(){this._sec++,this._sec>=60&&(this._sec=0,this._min++),this._time.textContent=(this._min>9?this._min:"0"+this._min)+":"+(this._sec>9?this._sec:"0"+this._sec),this.timer()}timer(){this._timerStart=setTimeout(this.tick.bind(this),1e3)}stop(){clearTimeout(this._timerStart)}}}},t={};function i(s){var o=t[s];if(void 0!==o)return o.exports;var l=t[s]={exports:{}};return e[s](l,l.exports,i),l.exports}(()=>{const e=i(619),t=i(707),s=i(446),o=i(752),l=document.querySelector(".app"),a=new e.Modal("complexity-level_block");a.buildModal("Выбери сложность"),localStorage.getItem("level")||a.openModal();const r=new t.Timer,n=[];!function(e,t,i){for(let o=0;o<e.length;o++)for(let l=0;l<t.length;l++){const a=new s.Card(e[o],t[l]);a.build(),i.push(a)}}(["clubs","diamonds","hearts","spades"],["A","K","Q","J","10","9","8","7","6"],n);let d=p(n);function c(e,t){const i=document.createElement(e);return i.classList.add(t),i}function m(){localStorage.clear(),window.location.reload()}function h(e,t){e.length=t;const i=[];return e.forEach((e=>{const t=new s.Card(e._suit,e._value);t.build(),i.push(t)})),[e,i].flat()}function p(e){for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}!function e(){if(l)if(localStorage.getItem("level")){l.append(function(){const e=c("div","game_wrapper"),t=c("div","tools_wrapper");r.buildTimer();const i=c("button","startAgain_btn");i.textContent="Начать заново",i.addEventListener("click",m);const s=c("div","game_field");return e.append(t),r.renderTimer(t),t.append(i),e.append(s),e}());const e=document.querySelector(".game_field");"1"===localStorage.getItem("level")?d=p(h(d,3)):"2"===localStorage.getItem("level")?d=p(h(d,6)):"3"===localStorage.getItem("level")&&(d=p(h(d,9))),d.forEach((t=>t.render(e))),setTimeout((()=>{document.querySelectorAll(".card").forEach((e=>{e.classList.add("hidden"),e.append(c("div","card-back"))})),r.tick()}),5e3)}else setTimeout(e,500)}(),function e(){localStorage.getItem("result")?(r.stop(),function(){if("win"===localStorage.getItem("result")){const e=new o.ModalFinal("result_block_win","win");e.buildModal("Вы выиграли!"),e.openModal()}else{const e=new o.ModalFinal("result_block_win","loss");e.buildModal("Вы проиграли!"),e.openModal()}}()):setTimeout(e,500)}()})()})();